<!DOCTYPE html>
<html>
<head>
    <title>Contoh FastAPI dan HTML</title>
</head>
<body>
    <h1>Kalkulator Kalori</h1>
    <form id="calorie-form">
        <label for="age">Usia:</label>
        <input type="number" id="age" name="age" required><br>

        <label for="weight">Berat (kg):</label>
        <input type="number" id="weight" name="weight" required><br>

        <label for="height">Tinggi (cm):</label>
        <input type="number" id="height" name="height" required><br>

        <label for="gender">Jenis Kelamin:</label>
        <select id="gender" name="gender" required>
            <option value="1">Pria</option>
            <option value="0">Wanita</option>
        </select><br>

        <label for="bmr">BMR:</label>
        <input type="number" id="bmr" name="bmr" required><br>

        <label for="activity_level">Tingkat Aktivitas:</label>
        <input type="number" id="activity_level" name="activity_level" required><br>

        <input type="submit" value="Hitung Kalori">
    </form>

    <div id="result"></div>

    <script>
        document.getElementById("calorie-form").addEventListener("submit", function(event) {
            event.preventDefault();

            // Mengambil nilai input dari form
            var age = document.getElementById("age").value;
            var weight = document.getElementById("weight").value;
            var height = document.getElementById("height").value;
            var gender = document.getElementById("gender").value;
            var bmr = document.getElementById("bmr").value;
            var activityLevel = document.getElementById("activity_level").value;

            // Mengirim permintaan POST ke endpoint API
            fetch("/calculate_calories", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    age: age,
                    weight: weight,
                    height: height,
                    gender: gender,
                    bmr: bmr,
                    activity_level: activityLevel
                })
            })
            .then(response => response.json())
            .then(data => {
                // Menampilkan hasil kalori yang dibutuhkan
                document.getElementById("result").textContent = "Kalori yang dibutuhkan: " + data.calories_needed;
            })
            .catch(error => {
                console.error("Error:", error);
            });
        });
    </script>
</body>
</html>
